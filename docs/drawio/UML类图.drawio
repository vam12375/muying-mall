<mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>
    
    <!-- 标题 -->
    <mxCell id="title" value="母婴商城核心领域模型 - UML类图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=18;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
      <mxGeometry x="450" y="10" width="350" height="30" as="geometry"/>
    </mxCell>
    
    <!-- =============== 用户域 =============== -->
    <mxCell id="user-domain-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;strokeWidth=1;opacity=50;" vertex="1" parent="1">
      <mxGeometry x="30" y="50" width="320" height="380" as="geometry"/>
    </mxCell>
    <mxCell id="user-domain-title" value="用户域" style="text;html=1;strokeColor=none;fillColor=#1565C0;align=center;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="30" y="50" width="60" height="20" as="geometry"/>
    </mxCell>
    
    <!-- User类 -->
    <mxCell id="user" value="User" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="40" y="80" width="140" height="165" as="geometry"/>
    </mxCell>
    <mxCell id="user-attr" value="- userId: Integer&#xa;- username: String&#xa;- password: String&#xa;- nickname: String&#xa;- phone: String&#xa;- email: String&#xa;- avatar: String&#xa;- status: Integer&#xa;- role: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="user">
      <mxGeometry y="22" width="140" height="115" as="geometry"/>
    </mxCell>
    <mxCell id="user-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#1976D2;" vertex="1" parent="user">
      <mxGeometry y="137" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="user-method" value="+ register()&#xa;+ login(): JWT" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="user">
      <mxGeometry y="145" width="140" height="20" as="geometry"/>
    </mxCell>
    
    <!-- UserAccount类 -->
    <mxCell id="account" value="UserAccount" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="200" y="80" width="140" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="account-attr" value="- id: Integer&#xa;- userId: Integer (FK)&#xa;- balance: BigDecimal&#xa;- frozenAmount: BigDecimal&#xa;- version: Integer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="account">
      <mxGeometry y="22" width="140" height="70" as="geometry"/>
    </mxCell>
    <mxCell id="account-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#1976D2;" vertex="1" parent="account">
      <mxGeometry y="92" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="account-method" value="+ recharge() / deduct()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="account">
      <mxGeometry y="100" width="140" height="20" as="geometry"/>
    </mxCell>
    
    <!-- UserAddress类 -->
    <mxCell id="address" value="UserAddress" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="40" y="260" width="140" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="address-attr" value="- addressId: Integer&#xa;- userId: Integer (FK)&#xa;- receiverName: String&#xa;- receiverPhone: String&#xa;- province/city: String&#xa;- isDefault: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="address">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    <mxCell id="address-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#1976D2;" vertex="1" parent="address">
      <mxGeometry y="100" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="address-method" value="+ setAsDefault()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="address">
      <mxGeometry y="108" width="140" height="12" as="geometry"/>
    </mxCell>
    
    <!-- UserPoints类 -->
    <mxCell id="points" value="UserPoints" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="200" y="260" width="140" height="100" as="geometry"/>
    </mxCell>
    <mxCell id="points-attr" value="- id: Integer&#xa;- userId: Integer (FK)&#xa;- totalPoints: Integer&#xa;- usedPoints: Integer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="points">
      <mxGeometry y="22" width="140" height="58" as="geometry"/>
    </mxCell>
    <mxCell id="points-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#1976D2;" vertex="1" parent="points">
      <mxGeometry y="80" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="points-method" value="+ add() / use()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="points">
      <mxGeometry y="88" width="140" height="12" as="geometry"/>
    </mxCell>
    
    <!-- =============== 商品域 =============== -->
    <mxCell id="product-domain-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;strokeWidth=1;opacity=50;" vertex="1" parent="1">
      <mxGeometry x="370" y="50" width="320" height="380" as="geometry"/>
    </mxCell>
    <mxCell id="product-domain-title" value="商品域" style="text;html=1;strokeColor=none;fillColor=#2E7D32;align=center;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="370" y="50" width="60" height="20" as="geometry"/>
    </mxCell>
    
    <!-- Product类 -->
    <mxCell id="product" value="Product" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="380" y="80" width="145" height="195" as="geometry"/>
    </mxCell>
    <mxCell id="product-attr" value="- productId: Integer&#xa;- categoryId: Integer (FK)&#xa;- brandId: Integer (FK)&#xa;- productName: String&#xa;- productSn: String&#xa;- priceNew: BigDecimal&#xa;- priceOld: BigDecimal&#xa;- stock: Integer&#xa;- sales: Integer&#xa;- hasSku: Boolean&#xa;- isHot/isNew: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="product">
      <mxGeometry y="22" width="145" height="140" as="geometry"/>
    </mxCell>
    <mxCell id="product-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#388E3C;" vertex="1" parent="product">
      <mxGeometry y="162" width="145" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="product-method" value="+ updateStock()&#xa;+ syncToES()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="product">
      <mxGeometry y="170" width="145" height="25" as="geometry"/>
    </mxCell>
    
    <!-- ProductSku类 -->
    <mxCell id="sku" value="ProductSku" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="540" y="80" width="140" height="140" as="geometry"/>
    </mxCell>
    <mxCell id="sku-attr" value="- skuId: Integer&#xa;- productId: Integer (FK)&#xa;- skuCode: String&#xa;- skuName: String&#xa;- specJson: String&#xa;- price: BigDecimal&#xa;- stock: Integer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="sku">
      <mxGeometry y="22" width="140" height="90" as="geometry"/>
    </mxCell>
    <mxCell id="sku-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#388E3C;" vertex="1" parent="sku">
      <mxGeometry y="112" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="sku-method" value="+ deductStock()&#xa;+ restoreStock()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="sku">
      <mxGeometry y="120" width="140" height="20" as="geometry"/>
    </mxCell>
    
    <!-- Category类 -->
    <mxCell id="category" value="Category" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="380" y="290" width="140" height="100" as="geometry"/>
    </mxCell>
    <mxCell id="category-attr" value="- categoryId: Integer&#xa;- categoryName: String&#xa;- parentId: Integer&#xa;- level: Integer&#xa;- sort: Integer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="category">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    
    <!-- Brand类 -->
    <mxCell id="brand" value="Brand" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="540" y="290" width="140" height="100" as="geometry"/>
    </mxCell>
    <mxCell id="brand-attr" value="- brandId: Integer&#xa;- brandName: String&#xa;- brandLogo: String&#xa;- description: String&#xa;- status: Integer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="brand">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    
    <!-- =============== 订单域 =============== -->
    <mxCell id="order-domain-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=1;opacity=50;" vertex="1" parent="1">
      <mxGeometry x="710" y="50" width="320" height="380" as="geometry"/>
    </mxCell>
    <mxCell id="order-domain-title" value="订单域" style="text;html=1;strokeColor=none;fillColor=#E65100;align=center;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="710" y="50" width="60" height="20" as="geometry"/>
    </mxCell>
    
    <!-- Order类 -->
    <mxCell id="order" value="Order" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="720" y="80" width="150" height="220" as="geometry"/>
    </mxCell>
    <mxCell id="order-attr" value="- orderId: Integer&#xa;- orderNo: String (UK)&#xa;- userId: Integer (FK)&#xa;- totalAmount: BigDecimal&#xa;- actualAmount: BigDecimal&#xa;- status: OrderStatus&#xa;  PENDING_PAYMENT&#xa;  PENDING_SHIPMENT&#xa;  SHIPPED / COMPLETED&#xa;- paymentId: Integer&#xa;- addressId: Integer&#xa;- version: Integer (乐观锁)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="order">
      <mxGeometry y="22" width="150" height="150" as="geometry"/>
    </mxCell>
    <mxCell id="order-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#F57C00;" vertex="1" parent="order">
      <mxGeometry y="172" width="150" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="order-method" value="+ create() / pay()&#xa;+ ship() / complete()&#xa;+ cancel()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="order">
      <mxGeometry y="180" width="150" height="40" as="geometry"/>
    </mxCell>
    
    <!-- OrderProduct类 -->
    <mxCell id="orderitem" value="OrderProduct" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="880" y="80" width="140" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="orderitem-attr" value="- id: Integer&#xa;- orderId: Integer (FK)&#xa;- productId: Integer (FK)&#xa;- skuId: Integer (FK)&#xa;- productName: String&#xa;- quantity: Integer&#xa;- price: BigDecimal" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="orderitem">
      <mxGeometry y="22" width="140" height="98" as="geometry"/>
    </mxCell>
    
    <!-- Cart类 -->
    <mxCell id="cart" value="Cart" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="880" y="220" width="140" height="130" as="geometry"/>
    </mxCell>
    <mxCell id="cart-attr" value="- cartId: Integer&#xa;- userId: Integer (FK)&#xa;- productId: Integer (FK)&#xa;- skuId: Integer (FK)&#xa;- quantity: Integer&#xa;- selected: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="cart">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    <mxCell id="cart-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#F57C00;" vertex="1" parent="cart">
      <mxGeometry y="100" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="cart-method" value="+ add() / update()&#xa;+ remove()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="cart">
      <mxGeometry y="108" width="140" height="22" as="geometry"/>
    </mxCell>
    
    <!-- =============== 支付域 =============== -->
    <mxCell id="payment-domain-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=1;opacity=50;" vertex="1" parent="1">
      <mxGeometry x="1050" y="50" width="320" height="380" as="geometry"/>
    </mxCell>
    <mxCell id="payment-domain-title" value="支付域" style="text;html=1;strokeColor=none;fillColor=#C2185B;align=center;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="1050" y="50" width="60" height="20" as="geometry"/>
    </mxCell>
    
    <!-- Payment类 -->
    <mxCell id="payment" value="Payment" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#F8BBD9;strokeColor=#D81B60;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="1060" y="80" width="150" height="180" as="geometry"/>
    </mxCell>
    <mxCell id="payment-attr" value="- id: Integer&#xa;- paymentNo: String (UK)&#xa;- orderId: Integer (FK)&#xa;- userId: Integer (FK)&#xa;- amount: BigDecimal&#xa;- paymentMethod: String&#xa;  [alipay/wechat/wallet]&#xa;- status: PaymentStatus&#xa;- transactionId: String&#xa;- version: Integer (乐观锁)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="payment">
      <mxGeometry y="22" width="150" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="payment-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#D81B60;" vertex="1" parent="payment">
      <mxGeometry y="142" width="150" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="payment-method" value="+ createPayment()&#xa;+ handleCallback()&#xa;+ refund()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="payment">
      <mxGeometry y="150" width="150" height="30" as="geometry"/>
    </mxCell>
    
    <!-- Refund类 -->
    <mxCell id="refund" value="Refund" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#F8BBD9;strokeColor=#D81B60;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="1220" y="80" width="140" height="140" as="geometry"/>
    </mxCell>
    <mxCell id="refund-attr" value="- refundId: Integer&#xa;- refundNo: String (UK)&#xa;- orderId: Integer (FK)&#xa;- paymentId: Integer (FK)&#xa;- refundAmount: BigDecimal&#xa;- reason: String&#xa;- status: RefundStatus" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="refund">
      <mxGeometry y="22" width="140" height="90" as="geometry"/>
    </mxCell>
    <mxCell id="refund-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#D81B60;" vertex="1" parent="refund">
      <mxGeometry y="112" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="refund-method" value="+ apply() / approve()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="refund">
      <mxGeometry y="120" width="140" height="20" as="geometry"/>
    </mxCell>
    
    <!-- Logistics类 -->
    <mxCell id="logistics" value="Logistics" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#F8BBD9;strokeColor=#D81B60;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="1060" y="280" width="140" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="logistics-attr" value="- logisticsId: Integer&#xa;- orderId: Integer (FK)&#xa;- companyId: Integer&#xa;- trackingNo: String&#xa;- status: Integer&#xa;- estimatedTime: Date" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="logistics">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    <mxCell id="logistics-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#D81B60;" vertex="1" parent="logistics">
      <mxGeometry y="100" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="logistics-method" value="+ updateStatus()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="logistics">
      <mxGeometry y="108" width="140" height="12" as="geometry"/>
    </mxCell>
    
    <!-- Coupon类 -->
    <mxCell id="coupon" value="Coupon" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=22;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#F8BBD9;strokeColor=#D81B60;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="1220" y="280" width="140" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="coupon-attr" value="- couponId: Integer&#xa;- couponName: String&#xa;- couponType: Integer&#xa;- discountValue: Decimal&#xa;- minOrderAmount: Decimal&#xa;- startTime / endTime" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="coupon">
      <mxGeometry y="22" width="140" height="78" as="geometry"/>
    </mxCell>
    <mxCell id="coupon-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#D81B60;" vertex="1" parent="coupon">
      <mxGeometry y="100" width="140" height="8" as="geometry"/>
    </mxCell>
    <mxCell id="coupon-method" value="+ issue() / use()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="coupon">
      <mxGeometry y="108" width="140" height="12" as="geometry"/>
    </mxCell>
    
    <!-- =============== 关系连线 =============== -->
    
    <!-- User 1:1 UserAccount -->
    <mxCell id="rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1976D2;strokeWidth=1;endArrow=diamondThin;endFill=1;endSize=10;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="user-attr" target="account-attr">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel1-label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel1">
      <mxGeometry x="0.7" relative="1" as="geometry"><mxPoint x="-5" y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- User 1:N UserAddress -->
    <mxCell id="rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1976D2;strokeWidth=1;endArrow=diamondThin;endFill=1;endSize=10;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="address" target="user">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel2-label" value="1:N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel2">
      <mxGeometry x="0.5" relative="1" as="geometry"><mxPoint x="15" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- User 1:1 UserPoints -->
    <mxCell id="rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1976D2;strokeWidth=1;endArrow=diamondThin;endFill=1;endSize=10;" edge="1" parent="1" source="points" target="user">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="320" y="310"/>
          <mxPoint x="320" y="250"/>
          <mxPoint x="180" y="250"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="rel3-label" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel3">
      <mxGeometry x="0.7" relative="1" as="geometry"><mxPoint x="-5" y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Product 1:N ProductSku -->
    <mxCell id="rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#388E3C;strokeWidth=1;endArrow=diamondThin;endFill=1;endSize=10;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="sku-attr" target="product-attr">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel4-label" value="1:N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel4">
      <mxGeometry x="0.3" relative="1" as="geometry"><mxPoint y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Product N:1 Category -->
    <mxCell id="rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#388E3C;strokeWidth=1;endArrow=open;endFill=0;dashed=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="product" target="category">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel5-label" value="N:1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel5">
      <mxGeometry x="0.3" relative="1" as="geometry"><mxPoint x="15" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Product N:1 Brand -->
    <mxCell id="rel6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#388E3C;strokeWidth=1;endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="product" target="brand">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="530" y="280"/>
          <mxPoint x="530" y="280"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="rel6-label" value="N:1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel6">
      <mxGeometry x="0.3" relative="1" as="geometry"><mxPoint x="-10" y="-10" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Order 1:N OrderProduct -->
    <mxCell id="rel7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#F57C00;strokeWidth=1;endArrow=diamondThin;endFill=1;endSize=10;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="orderitem-attr" target="order-attr">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel7-label" value="1:N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel7">
      <mxGeometry x="0.3" relative="1" as="geometry"><mxPoint y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Order 1:1 Payment -->
    <mxCell id="rel8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D81B60;strokeWidth=1;endArrow=open;endFill=0;dashed=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="order-attr" target="payment-attr">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="rel8-label" value="1:1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel8">
      <mxGeometry x="0.3" relative="1" as="geometry"><mxPoint y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- Order 1:1 Logistics -->
    <mxCell id="rel9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D81B60;strokeWidth=1;endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="order" target="logistics">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="870" y="300"/>
          <mxPoint x="1040" y="300"/>
          <mxPoint x="1040" y="340"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="rel9-label" value="1:1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontStyle=1;" vertex="1" connectable="0" parent="rel9">
      <mxGeometry x="0.5" relative="1" as="geometry"><mxPoint y="-8" as="offset"/></mxGeometry>
    </mxCell>
    
    <!-- =============== 图例 =============== -->
    <mxCell id="legend-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
      <mxGeometry x="30" y="450" width="350" height="80" as="geometry"/>
    </mxCell>
    <mxCell id="legend-title" value="图例" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="455" width="40" height="15" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend1" value="" style="endArrow=diamondThin;endFill=1;endSize=10;html=1;strokeColor=#333333;strokeWidth=1;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="40" y="490" as="sourcePoint"/>
        <mxPoint x="100" y="490" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    <mxCell id="legend1-text" value="组合 (Composition)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="105" y="482" width="100" height="15" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend2" value="" style="endArrow=open;endFill=0;dashed=1;html=1;strokeColor=#333333;strokeWidth=1;" edge="1" parent="1">
      <mxGeometry relative="1" as="geometry">
        <mxPoint x="40" y="510" as="sourcePoint"/>
        <mxPoint x="100" y="510" as="targetPoint"/>
      </mxGeometry>
    </mxCell>
    <mxCell id="legend2-text" value="依赖 (Dependency)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="105" y="502" width="100" height="15" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend3-text" value="PK=主键 | FK=外键 | UK=唯一键" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontColor=#666666;" vertex="1" parent="1">
      <mxGeometry x="220" y="490" width="150" height="15" as="geometry"/>
    </mxCell>
    
  </root>
</mxGraphModel>