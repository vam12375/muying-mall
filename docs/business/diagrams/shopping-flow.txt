# 母婴商城用户购物流程图文本描述

## 图表结构描述

本文档描述了母婴商城系统用户购物流程图的结构和布局，作为实际绘制图表的参考。

## 主要流程阶段

### 1. 商品浏览阶段
- **开始节点**：用户访问商城
- **活动节点**：
  - 浏览商品列表
  - 按分类筛选
  - 搜索商品
  - 查看促销活动
- **决策节点**：是否进入商品详情？
  - 是 → 查看商品详情
  - 否 → 继续浏览

### 2. 商品详情阶段
- **活动节点**：
  - 查看商品详情
  - 查看商品规格
  - 查看评价信息
  - 查看相关推荐
- **决策节点**：是否加入购物车？
  - 是 → 选择规格和数量
  - 否 → 返回商品列表或继续浏览

### 3. 购物车阶段
- **活动节点**：
  - 加入购物车
  - 查看购物车
  - 修改数量
  - 勾选/取消勾选商品
  - 删除商品
- **决策节点**：是否结算？
  - 是 → 进入结算页面
  - 否 → 继续购物或离开

### 4. 结算阶段
- **活动节点**：
  - 确认收货地址
  - 选择配送方式
  - 选择支付方式
  - 使用优惠券
  - 使用积分
  - 查看订单金额
- **决策节点**：是否提交订单？
  - 是 → 创建订单
  - 否 → 返回购物车或取消

### 5. 支付阶段
- **活动节点**：
  - 生成订单
  - 选择支付方式
  - 跳转支付平台
  - 完成支付
- **决策节点**：支付是否成功？
  - 是 → 支付成功，等待发货
  - 否 → 支付失败，返回支付页面或取消订单

### 6. 订单履行阶段
- **活动节点**：
  - 商家发货
  - 物流配送
  - 用户收货
  - 确认收货
- **决策节点**：是否确认收货？
  - 是 → 订单完成
  - 否 → 等待自动确认（15天）

### 7. 评价阶段
- **活动节点**：
  - 评价商品
  - 上传评价图片
  - 获得积分奖励
- **结束节点**：购物流程完成

## 异常流程

### 1. 商品缺货处理
- **触发点**：选择规格时发现库存不足
- **活动节点**：
  - 显示库存不足提示
  - 提供到货通知选项
  - 推荐替代商品

### 2. 支付超时处理
- **触发点**：订单创建后30分钟未支付
- **活动节点**：
  - 发送支付提醒
  - 自动取消订单
  - 释放库存

### 3. 退款处理
- **触发点**：用户申请退款
- **活动节点**：
  - 提交退款申请
  - 商家审核
  - 退款到原支付渠道
- **连接点**：连接到退款流程图

## 数据流示意

- **商品数据流**：
  商品服务 → 缓存层 → API网关 → 前端展示

- **购物车数据流**：
  前端 → API网关 → 购物车服务 → Redis/MySQL

- **订单数据流**：
  前端 → API网关 → 订单服务 → MySQL
                   ↓
  商品服务 ← 事件总线 ← 支付服务

## 组件交互

- **前端与API网关**：HTTP/HTTPS请求
- **API网关与微服务**：REST API
- **微服务之间**：事件总线/异步消息
- **服务与数据库**：数据库连接池
- **服务与缓存**：Redis客户端

## 图形表示建议

1. **流程形状**：
   - 矩形：活动/处理
   - 菱形：决策点
   - 圆角矩形：开始/结束
   - 平行四边形：数据输入/输出

2. **连接线**：
   - 实线箭头：正常流程
   - 虚线箭头：异常流程
   - 双向箭头：交互流程

3. **分区**：
   - 按流程阶段划分泳道
   - 不同角色使用不同泳道（用户、系统、商家、物流）

4. **颜色编码**：
   - 正常流程：蓝色
   - 决策点：黄色
   - 异常流程：红色
   - 数据交互：绿色

## 图例建议

添加图例说明以下元素：
1. 流程步骤符号
2. 决策点符号
3. 开始/结束符号
4. 异常流程线型
5. 数据流线型
6. 不同阶段的颜色编码

## 布局建议

1. 从上到下、从左到右展示主流程
2. 异常流程放在右侧或底部
3. 将相关步骤分组放置
4. 使用泳道图显示不同角色的职责
5. 避免线条交叉，保持流程清晰

## 绘图工具建议

可使用以下工具绘制流程图：
1. draw.io / diagrams.net：免费开源的流程图工具
2. Lucidchart：专业流程图绘制工具
3. Microsoft Visio：专业流程图软件
4. ProcessOn：在线流程图工具，支持协作

## 图表大小建议

建议使用A3或更大尺寸，以确保细节清晰可见。如果用于Web展示，考虑分段展示或提供缩放功能。 